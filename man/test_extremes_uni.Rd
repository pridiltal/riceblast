% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/test_extremes_uni.R
\name{test_extremes_uni}
\alias{test_extremes_uni}
\title{Assess test set observations against estimated anomalous thresholds}
\usage{
test_extremes_uni(analysis_result, test_data, h = 1000)
}
\arguments{
\item{analysis_result}{A list object returned by \code{\link{model_extremes_uni}},
containing the fitted model, lower limit, and related metadata.}

\item{test_data}{A tsibble or data frame containing the test/forecast period
data. This will be combined with the typical_data from \code{model_extremes_uni}
to form the full dataset used for error analysis.}

\item{h}{Integer. The forecast horizon, i.e., the number of future observations
to predict. Default is 1000.}
}
\value{
A list containing:
\describe{
  \item{model}{The fitted model object from \code{model_extremes_uni}.}
  \item{forecast}{A \code{fable} forecast object containing mean forecasts and intervals.}
  \item{all_errors}{A \code{tsibble} containing both fitted residuals and forecast errors.}
  \item{lower_limit}{The estimated lower extreme threshold (from the model analysis).}
  \item{upper_limit}{The estimated upper extreme threshold (from the model analysis).}
  \item{full_data}{The combined dataset consisting of \code{typical_data} and \code{test_data}.}
  \item{response}{The response variable name as a character string.}
}
}
\description{
Extends the analysis from \code{\link{model_extremes_uni}} by generating forecasts
and evaluating model residuals and forecast errors relative to the estimated
lower extreme threshold. This helps to assess whether future values fall within
the expected range or cross the lower extreme boundary. The function allows the
inclusion of new test data, which is combined with the training (typical) data
to create a complete dataset for residual and forecast error analysis.
}
\details{
The function performs two main tasks:
\itemize{
  \item Generates forecasts (\code{h} steps ahead) using the fitted model.
  \item Combines fitted residuals (from the training window) and forecast errors
        (from the forecasted window) into a unified time series object for
        downstream analysis and visualization.
}

Forecast errors are computed as the difference between the observed response
variable and the forecast mean. Both fitted and forecast errors are combined
with labels for easy comparison and plotting.
}
\examples{

# Create a sample daily time series dataset
data <- tsibble::tsibble(
  date = seq.Date(as.Date("2020-01-01"), as.Date("2020-12-31"), by = "day"),
  value = c(rnorm(300),rnorm(66, -3)),
  index = date
)

result <- model_extremes_uni(
  full_data = data,
  time_col = date,
  typical_start = "2020-01-01",
  typical_end = "2020-08-30",
  response = value,
  thr_prob_fit = 0.1,
  t_method = "boxplot"
)

test_data <- data |>
  dplyr::filter(date > as.Date("2020-06-30")) |>
  dplyr::select(date, value) |>
  tsibble::as_tsibble(index = date)

test_result <- riceblast::test_extremes_uni(result,test_data = test_data,  h = 200)

test_result

}
