% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_extreme_analysis.R
\name{plot_extreme_analysis}
\alias{plot_extreme_analysis}
\title{Visualize Fitted, Forecasted, and Extreme Error Patterns}
\usage{
plot_extreme_analysis(analysis_result)
}
\arguments{
\item{analysis_result}{A list object returned by
\code{\link{test_extremes}}, containing the fitted model, forecast,
threshold information, and error diagnostics.}
}
\value{
A list containing:
\describe{
  \item{main_plot}{A \code{ggplot2} object showing observed, fitted, and forecasted series.}
  \item{error_plot}{A \code{ggplot2} object showing residuals and forecast errors with threshold.}
}
}
\description{
Produces diagnostic visualizations from the results of
\code{\link{model_extremes}} and \code{\link{test_extremes}}.
The function generates two key plots:
\itemize{
  \item A time series plot of observed, fitted, and forecasted values.
  \item A diagnostic plot of residuals and forecast errors with the estimated
        lower extreme threshold marked.
}
}
\details{
The function visualizes both the model fit and the extremal analysis:
\itemize{
  \item The **main plot** shows the observed series (black), fitted values (blue),
        and forecasts (red), annotated with the thresholding method (EVT or boxplot).
  \item The **error plot** displays residuals and forecast errors over time.
        The horizontal dashed red line represents the lower extreme threshold,
        below which anomalies may occur.
}
}
\examples{
# Create a sample daily time series dataset (use Date, not POSIXct)
data <- tsibble::tsibble(
  date = seq.Date(as.Date("2020-01-01"), as.Date("2020-12-31"), by = "day"),
  value = c(rnorm(300),rnorm(66, -3)),
  index = date
)

# Run the model_extremes function
result <- model_extremes(
  full_data = data,
  time_col = date,
  typical_start = "2020-01-01",
  typical_end = "2020-08-30",
  response = value,
  tail_prob = 0.1,
  t_method = "boxplot"
)

test_data <- data |>
  dplyr::filter(date > as.Date("2020-06-30")) |>
  dplyr::select(date, value) |>
  tsibble::as_tsibble(index = date)

test_result <- riceblast::test_extremes(result,test_data = test_data,  h = 200)

# Generate and view plots
plots <- plot_extreme_analysis(test_result)
plots$main_plot
plots$error_plot

}
